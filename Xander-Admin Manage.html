<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Xander Admin | Manage Orders</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Poppins', sans-serif;
  background: #f4f7fb;
  margin: 0;
  padding: 20px;
}
h1 {
  text-align: center;
  margin-bottom: 20px;
}
.order {
  background: white;
  border-radius: 10px;
  padding: 15px;
  margin-bottom: 15px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
.order h3 { margin: 0 0 10px; }
.status {
  margin: 10px 0;
}
select {
  padding: 6px;
  border-radius: 6px;
}
button {
  padding: 6px 12px;
  border: none;
  border-radius: 6px;
  background: #4caf50;
  color: white;
  cursor: pointer;
}
button:hover {
  background: #45a049;
}
</style>
</head>
<body>

<h1>ðŸ“¦ Xander Admin Panel</h1>
<div id="ordersContainer"></div>

<script>
function loadOrders() {
  let orders = JSON.parse(localStorage.getItem('pastOrders') || '[]');
  const container = document.getElementById('ordersContainer');
  container.innerHTML = '';

  if (!orders.length) {
    container.innerHTML = "<p>No customer orders yet.</p>";
    return;
  }

  orders.forEach((order, index) => {
    if (order.statusStep === undefined) order.statusStep = 0;
    const div = document.createElement('div');
    div.className = 'order';
    div.innerHTML = `
      <h3>${order.name} - $${order.price} (x${order.quantity || 1})</h3>
      <p><b>Customer:</b> ${order.customerName || "Guest"}</p>
      <div class="status">
        <label for="status-${index}">Status:</label>
        <select id="status-${index}">
          <option value="0" ${order.statusStep==0?"selected":""}>Processing</option>
          <option value="1" ${order.statusStep==1?"selected":""}>Shipped</option>
          <option value="2" ${order.statusStep==2?"selected":""}>Delivered</option>
        </select>
      </div>
      <button onclick="updateOrder(${index})">Update</button>
    `;
    container.appendChild(div);
  });
}

function updateOrder(index) {
  let orders = JSON.parse(localStorage.getItem('pastOrders') || '[]');
  const newStep = parseInt(document.getElementById(`status-${index}`).value);
  orders[index].statusStep = newStep;
  localStorage.setItem('pastOrders', JSON.stringify(orders));
  alert("âœ… Order updated! Customers will see it in Track Orders.");
}

loadOrders();
</script>

</body>
</html>
