<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Xander | Track Orders</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(270deg,#ff758c,#ff7eb3,#9face6);
  background-size: 600% 600%;
  animation: gradientBG 15s ease infinite;
  color: #fff;
  margin: 0;
  padding: 0;
}

@keyframes gradientBG {
  0% { background-position:0% 50%; }
  50% { background-position:100% 50%; }
  100% { background-position:0% 50%; }
}

header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:15px 40px;
  background: rgba(0,0,0,0.4);
  backdrop-filter: blur(10px);
  position: sticky;
  top:0;
  z-index:1000;
}

header h1 { font-size:1.8rem; font-weight:700; }
nav a { margin:0 15px; text-decoration:none; color:#fff; font-weight:500; position:relative; }
nav a::after { content:''; position:absolute; width:0; height:2px; bottom:-5px; left:0; background:#fff; transition:width 0.3s; }
nav a:hover::after { width:100%; }

.profile-btn {
  background:#fff;
  color:#333;
  border-radius:10px;
  width:40px;
  height:40px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
  cursor:pointer;
  box-shadow:0 4px 8px rgba(0,0,0,0.2);
  transition:transform 0.3s;
}

.profile-btn:hover { transform:scale(1.1); }

main {
  max-width:700px;
  margin:30px auto;
  padding:20px;
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(10px);
  border-radius:15px;
}

h2 { text-align:center; margin-bottom:20px; }

.order-item {
  background: rgba(255,255,255,0.2);
  margin:15px 0;
  padding:15px;
  border-radius:10px;
}

.status-bar {
  height: 8px;
  width: 100%;
  background: rgba(255,255,255,0.3);
  border-radius:5px;
  margin-top:10px;
  overflow:hidden;
}

.status-progress {
  height:100%;
  width:0%;
  background: #00ff00;
  transition: width 1s;
}

.status-text {
  margin-top:8px;
  font-weight:600;
}
</style>
</head>
<body>

<header>
<h1>Xander</h1>
<nav>
  <a href="index.html">Home</a>
  <a href="shopping.html">Shop</a>
  <a href="cart.html">Cart</a>
  <a href="profile.html">Profile</a>
</nav>
<div style="display:flex;align-items:center;gap:10px;">
  <span id="cart-count">ðŸ›’ 0</span>
  <div class="profile-btn" onclick="window.location.href='profile.html'">U</div>
</div>
</header>

<main>
<h2>Track My Orders</h2>
<div id="ordersContainer"></div>
</main>

<script>
// Load profile initial & cart count
function loadProfileInitial() {
  const name = localStorage.getItem('username') || 'U';
  document.querySelector('.profile-btn').textContent = name.charAt(0).toUpperCase();
}
function updateCartCount() {
  const cart = JSON.parse(localStorage.getItem('cart') || '[]');
  document.getElementById('cart-count').textContent = `ðŸ›’ ${cart.length}`;
}
loadProfileInitial();
updateCartCount();

// Track orders
function loadOrders() {
  const orders = JSON.parse(localStorage.getItem('pastOrders') || '[]');
  const container = document.getElementById('ordersContainer');
  container.innerHTML = '';
  if(!orders.length) {
    container.innerHTML = "<p>No orders yet.</p>";
    return;
  }

  orders.forEach((order, index) => {
    const div = document.createElement('div');
    div.className = 'order-item';
    div.innerHTML = `
      <div><strong>${order.name}</strong> - $${order.price} (x${order.quantity || 1})</div>
      <div class="status-bar"><div class="status-progress" id="progress-${index}"></div></div>
      <div class="status-text" id="status-${index}">Processing</div>
    `;
    container.appendChild(div);

    // Animate status
    const progress = document.getElementById(`progress-${index}`);
    const statusText = document.getElementById(`status-${index}`);
    let stage = localStorage.getItem(`status-${index}`) || 'Processing';
    setStatus(stage);

    function setStatus(stage) {
      switch(stage) {
        case 'Processing':
          progress.style.width = '33%';
          statusText.textContent = 'Processing';
          break;
        case 'Shipped':
          progress.style.width = '66%';
          statusText.textContent = 'Shipped';
          break;
        case 'Delivered':
          progress.style.width = '100%';
          statusText.textContent = 'Delivered';
          break;
      }
      localStorage.setItem(`status-${index}`, stage);
    }

    // Auto update every 10 seconds for demo
    setInterval(()=>{
      if(stage === 'Processing') stage = 'Shipped';
      else if(stage === 'Shipped') stage = 'Delivered';
      setStatus(stage);
    }, 10000);
  });
}

loadOrders();
</script>

</body>
</html>
