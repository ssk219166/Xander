<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Xander | Track Orders</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
body{
  background: linear-gradient(270deg,#ff758c,#ff7eb3,#9face6);
  background-size:600% 600%;
  animation: gradientBG 15s ease infinite;
  min-height:100vh; padding:20px;
}
@keyframes gradientBG {
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
h1{ text-align:center; color:#fff; margin-bottom:30px; }
.order-card{
  background:rgba(255,255,255,0.95);
  border-radius:15px;
  padding:20px;
  margin-bottom:25px;
  box-shadow:0 6px 15px rgba(0,0,0,0.2);
}
.order-header{
  display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:10px;
}
.order-title{ font-size:1.05rem; color:#333; line-height:1.3; }
.controls{ display:flex; gap:8px; flex-wrap:wrap; }
button{
  padding:6px 12px; border:none; border-radius:8px; cursor:pointer;
  background:#4caf50; color:#fff; transition:transform .05s ease, opacity .2s ease, background .2s ease;
}
button:hover{ background:#45a049; }
button:active{ transform:translateY(1px); }
button[disabled]{ opacity:.45; cursor:not-allowed; }

.status-line{ font-size:.9rem; color:#444; margin-bottom:10px; }
.status-pill{
  display:inline-block; padding:4px 10px; border-radius:999px; font-size:.8rem; font-weight:600; color:#fff;
}
.status-0{ background:#fb8c00; } /* Processing */
.status-1{ background:#1976d2; } /* Shipped */
.status-2{ background:#2e7d32; } /* Delivered */

/* Progress bar */
.progress-container{ position:relative; height:6px; background:#ddd; border-radius:3px; margin:16px 0; }
.progress{
  height:6px; background:linear-gradient(90deg,#4caf50,#2ecc71); border-radius:3px;
  width:0; transition:width .4s ease-in-out;
}
.step{ position:absolute; top:-20px; transform:translateX(-50%); text-align:center; width:80px; }
.step .circle{
  width:24px; height:24px; border-radius:50%; background:#bbb; color:#fff; display:flex; align-items:center; justify-content:center;
  margin:0 auto 5px; font-size:12px; transition:background .4s ease-in-out, transform .3s;
}
.step.active .circle{ background:#4caf50; transform:scale(1.1); box-shadow:0 0 10px rgba(76,175,80,.8); }
.step .label{ font-size:12px; color:#555; }
</style>
</head>
<body>

<header>
  <h1>Xander</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="shop.html">Shop</a>
    <a href="cart.html">Cart</a>
    <a href="profile.html">Profile</a>
  </nav>
</header>

<main>
  <h2>Track My Orders</h2>
  <div id="ordersContainer"></div>
</main>

<script>
function loadOrders() {
  let orders = JSON.parse(localStorage.getItem('pastOrders') || '[]');
  const container = document.getElementById('ordersContainer');
  container.innerHTML = '';

  if (!orders.length) {
    container.innerHTML = "<p style='color:white; text-align:center;'>No orders yet.</p>";
    return;
  }

  orders.forEach((order, index) => {
    if (order.statusStep === undefined) order.statusStep = 0;
    const div = document.createElement('div');
    div.className = 'order-card';
    div.style.animationDelay = `${index * 0.2}s`; // staggered entrance
    div.innerHTML = `
      <div class="order-header">
        <h3>${order.name} - $${order.price} (x${order.quantity || 1})</h3>
        <span>Status: <b id="status-${index}" class="status-text">Processing</b></span>
      </div>
      <div class="progress-container">
        <div class="progress" id="progress-${index}"></div>
        <div class="step" style="left:0%">
          <div class="circle" id="circle-${index}-0">1</div>
          <div class="label">Processing</div>
        </div>
        <div class="step" style="left:50%">
          <div class="circle" id="circle-${index}-1">2</div>
          <div class="label">Shipped</div>
        </div>
        <div class="step" style="left:100%">
          <div class="circle" id="circle-${index}-2">3</div>
          <div class="label">Delivered</div>
        </div>
      </div>
    `;
    container.appendChild(div);
    updateUI(index, order.statusStep);
  });
}

function updateUI(orderIndex, step) {
  const steps = ["Processing", "Shipped", "Delivered"];
  const progressBar = document.getElementById(`progress-${orderIndex}`);
  const statusLabel = document.getElementById(`status-${orderIndex}`);

  statusLabel.style.opacity = "0";
  setTimeout(() => {
    statusLabel.textContent = steps[step] || "Processing";
    statusLabel.style.opacity = "1";
  }, 200);

  for (let i = 0; i <= 2; i++) {
    const circle = document.getElementById(`circle-${orderIndex}-${i}`);
    if (i <= step) circle.classList.add('active');
    else circle.classList.remove('active');
  }
  progressBar.style.width = `${(step / 2) * 100}%`;
}

window.addEventListener('storage', function(event) {
  if (event.key === 'pastOrders') loadOrders();
});

loadOrders();
</script>

</body>
</html>
